<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.pzj.core.imgsrv.dao.write.TblImageWMapper">

<!-- 所有字段 -->
	<sql id="Base_Column_List">
	id  
	,name 
	,md5name 
	,path 
	,is_historical_data 
	,create_time 
	,create_by 
	,extension 
	</sql>
	
	<!-- 插入 -->
	<insert id="insert" parameterType="com.pzj.core.imgsrv.dao.entity.TblImage" useGeneratedKeys="true" keyProperty="id">
		insert into tbl_image 
		<trim prefix="(" suffix=")" suffixOverrides=",">
				id, 
			<if test="name != null">
			    name,
			</if>
			<if test="md5name != null">
			    md5name,
			</if>
			<if test="path != null">
			    path,
			</if>
			<if test="isHistoricalData != null">
			    is_historical_data,
			</if>
			<if test="createTime != null">
			    create_time,
			</if>
			<if test="createBy != null">
			    create_by,
			</if>
			<if test="extension != null">
			    extension,
			</if> 
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			     #{id,jdbcType=BIGINT}, 
			<if test="name != null">
			    #{name,jdbcType=VARCHAR},
			</if>
			<if test="md5name != null">
			    #{md5name,jdbcType=VARCHAR},
			</if>
			<if test="path != null">
			    #{path,jdbcType=VARCHAR},
			</if>
			<if test="isHistoricalData != null">
			    #{isHistoricalData,jdbcType=BIT},
			</if>
			<if test="createTime != null">
			    #{createTime,jdbcType=BIGINT},
			</if>
			<if test="createBy != null">
			    #{createBy,jdbcType=BIGINT},
			</if>
			<if test="extension != null">
			    #{extension,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	
<!-- 批量插入 请根据业务修改默认值-->	
    <insert id="insertBatch"  parameterType="java.util.List">
		insert into tbl_image 
		(id  
		,name 
		,md5name 
		,path 
		,is_historical_data 
		,create_time 
		,create_by 
		,extension  
		) 
		values
		<foreach collection="list" item="item" separator=",">
		(#{item.id,jdbcType=BIGINT}  
			<choose>  
				<when test="item.name != null">,#{item.name ,jdbcType=VARCHAR}</when>
				<otherwise>,''</otherwise>
			</choose>
			<choose>  
				<when test="item.md5name != null">,#{item.md5name ,jdbcType=VARCHAR}</when>
				<otherwise>,''</otherwise>
			</choose>
			<choose>  
				<when test="item.path != null">,#{item.path ,jdbcType=VARCHAR}</when>
				<otherwise>,''</otherwise>
			</choose>
			<choose>  
				<when test="item.isHistoricalData != null">,#{item.isHistoricalData ,jdbcType=BIT}</when>
				<otherwise>,0</otherwise>
			</choose>
			<choose>  
				<when test="item.createTime != null">,#{item.createTime ,jdbcType=BIGINT}</when>
				<otherwise>,0</otherwise>
			</choose>
			<choose>  
				<when test="item.createBy != null">,#{item.createBy ,jdbcType=BIGINT}</when>
				<otherwise>,0</otherwise>
			</choose>
			<choose>  
				<when test="item.extension != null">,#{item.extension ,jdbcType=VARCHAR}</when>
				<otherwise>,''</otherwise>
			</choose> 
		)
		</foreach>
	</insert>
	
	<!-- 删除 -->    
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    delete from tbl_image where id = #{id,jdbcType=BIGINT}
    </delete>
</mapper>